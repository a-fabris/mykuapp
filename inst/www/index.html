<!-- index.html -->
<!doctype html>
<html>
	
<head>  
   <!-- META -->
	<meta charset="utf-8">

    <!-- JS Frameworks -->
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script> <!-- jquery -->
    <script type="text/javascript" src="bower_components/jquery-ui/jquery-ui.js"></script> <!-- jquery UI-->

    <script type="text/javascript" src="bower_components/d3/d3.js"></script> <!-- d3.js data visualization -->
    <script type="text/javascript" src="bower_components/opencpu/opencpu-0.5.js"></script> <!-- open CPU -->
    <script type="text/javascript" src="bower_components/ace-builds/src-min-noconflict/ace.js"></script> <!-- ace editor -->
    
    <script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script> <!-- bootstrap -->
    <script type="text/javascript" src="bower_components/handsontable/dist/handsontable.full.js"></script> <!-- handsontable -->
    <script type="text/javascript" src="bower_components/papaparse/papaparse.js"></script> <!-- papa parse csv to json -->

    <!-- Angular -->
	<script type="text/javascript" src="bower_components/angular/angular.js"></script> <!-- angular.js -->
    <script type="text/javascript" src="bower_components/angular-route/angular-route.js"></script>
    <script type="text/javascript" src="bower_components/angular-filter/dist/angular-filter.js"></script>
    <script type="text/javascript" src="bower_components/angular-ui-ace/ui-ace.js"></script>
    <script type="text/javascript" src="js/app.js"></script> <!-- angular app definition -->
    <script type="text/javascript" src="js/controllers.js"></script> <!-- main controller -->

    <!-- custom JS -->
	<script type="text/javascript" src="js/plotLogic.js"></script> <!-- main controller -->    

    <!-- CSS -->
    <link rel="stylesheet" media="screen" href="bower_components/bootstrap/dist/css/bootstrap.css"><!-- bootstrap -->
    <link rel="stylesheet" media="screen" href="bower_components/font-awesome/css/font-awesome.css"><!-- font awesome -->
    <link rel="stylesheet" media="screen" href="bower_components/handsontable/dist/handsontable.full.css"><!-- handsontable -->
    <link rel="stylesheet" media="screen" href="bower_components/jquery-ui/themes/smoothness/jquery-ui.css"> <!-- jquery UI style sheet-->

    <!-- custom CSS -->
    <link rel="stylesheet" media="screen" href="style/explore.css">
    <link rel="stylesheet" media="screen" href="style/data-preview.css">
    <link rel="stylesheet" media="screen" href="style/editors.css">

    <style type="text/css">
    	#data-area{ height: 350px; width: 100%; overflow: hidden;}
    	/*#vis-area {height: 350px; width: 100%;}*/
    	.transcript {background-color: #006666; height: 200px; width: 100%;}
    	.plotQuadrant {cursor: pointer; cursor: hand;}

    	#editor { 
        	/*position: absolute;*/
        	top: 0;
        	right: 0;
        	bottom: 0;
        	left: 0;
        	height: 500px;
    	}

    	#footer {height: 50px; background-color: #E6E6E6;}
    	#q2-editor {height: 400px; width: 500px; position: absolute; top: 50px; left: 800px;}
    </style>
</head>

<body ng-app="thesisPrototype" ng-controller="landingCtrl">
	<div class="container-fluid">
		<div class="row"> <!-- header -->
			<div class="col-md-12">
				<h4>{{title}} <small>{{author}}</small></h4>
				<!--
				<input type="file" name="csv" id="csvFile">
				<button class="btn btn-default" type="button" id="readCSV">Load table</button>
				
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#q2-editor" aria-expanded="false" aria-controls="q2-editor">
				<span class="glyphicon glyphicon-console"></span></button>
				-->
				<!--
				<button class="btn btn-default" type="button" id="cmdOpener"><span class="glyphicon glyphicon-console"></span></button>
				-->
			</div>
		</div>
		<div ng-view>
		</div>
	</div>
</body>

<script>

/*
var container = document.getElementById('data-area');

var cerealData; 

var featureSet = new Set(); //array to store the data variables

//call R function: stocks::smoothplot(ticker=ticker)
$("#plotFromR").click(function(){
    //var ticker = $("#ticker").val();

    //ocpu.seturl("https://public.opencpu.org/ocpu/library/ggplot2/R");

    var req = $("#vis-area").rplot("histogram");
    
    //optional
    req.fail(function(){
        alert("R returned an error: " + req.responseText); 
    });
});

var hot = new Handsontable(container, {
	//startRows: 8,
   	//startCols: 6,
   	rowHeaders: true,
   	contextMenu: true,
   	customBorders: true,
	manualColumnMove: true,
  	manualRowMove: true
});


$("#readCSV").click(function(){

	var csvFile = $("#csvFile")[0].files[0];

	Papa.parse(csvFile, {
		
		complete: function(results) {
	
			hot.updateSettings({colHeaders : results.data[0]});
	
			hot.loadData(results.data);
	
			for(var i = 0 ; i < results.data[0].length ; i++){

				var txtToAppend = "";
				txtToAppend += "<span class='label label-default'>";
				txtToAppend += "<input type='checkbox' name='checkbox' id='chk_" + results.data[0][i] + "' value='" + results.data[0][i] + "' />";
				txtToAppend += results.data[0][i];
				txtToAppend += "</span>";

				$( "#data-features" ).append( txtToAppend );
			}

   			$(document).ready(function(){
   				featureListener();

			}); // .document.ready
		}			
	})
});



$("#vis-area").on("click","#plotQ2",function(){

	$( "#workspace" ).empty();

	var req = $("#workspace").rplot("plotDensity",{
    	feature : "calories"
    });

	req.fail(function(){
		alert("R returned an error: " + req.responseText); 
	});

	$("body").append("<div id='q2-editor' class='collapse'></div>");
	
	$("#q2-editor").draggable({ cursor: "move"});

	$('#q2-editor').on('shown.bs.collapse', function () {
    	$('#workspace').css({
    		'border':'3px solid #FF1919',
    		'border-radius': '15px'
    	});

    	$('#q2-editor').css({
    		'border' : '3px solid #FF1919',
    		'border-radius' : '15px'
    	});
	});

	$('#q2-editor').on('hidden.bs.collapse', function () {
    	$('#q2-editor').css({'border':'', 'border-radius':''});
    	$('#workspace').css({'border':'', 'border-radius':''});
	});


	var q2Editor = ace.edit("q2-editor");
	q2Editor.setTheme("ace/theme/monokai");
	q2Editor.getSession().setMode("ace/mode/r");
	q2Editor.resize();
	q2Editor.setShowPrintMargin(false);


    var Rsnippet = "cereal <- MASS::UScereal; \nggplot(cereal) + aes_string(calories) + \ngeom_density(kernel='gaussian');";

    q2Editor.setValue(Rsnippet);
	
});
*/

/*
function plotFromFeature(btnId){
    	
	var myFeature = "";
	myFeature = btnId.substring(4); // cuts btn_ prefix

	var req = $("#vis-area").rplot("histoFromFeature",{
		feature : myFeature 
	});
    
	//optional
	req.fail(function(){
		alert("R returned an error: " + req.responseText); 
	});
}
*/
/*
var editor = ace.edit("editor");
editor.setTheme("ace/theme/monokai");
editor.getSession().setMode("ace/mode/r");
*/
/*
$(document).ready(function(){
	$("#data-grid-bar").append("<div id='data-grid' class='collapse'>DATA GRID CONTAINER</div>");
});
*/
</script>

</html>